{
  "name": "STEDI-DEMO-MAPPING",
  "type": "only_mapped_keys",
  "mapping": "{\n\t\"records\":[{\n\t\"fields\":{\n\t\"customerName\":interchanges[0].groups[0].transaction_sets[0].heading.party_identification_N1_loop[0].party_identification_N1.name_02,\n\t\"purchaseOrderNumber\":interchanges[0].groups[0].transaction_sets[0].heading.beginning_segment_for_purchase_order_BEG.purchase_order_number_03,\n\t\"purchaseOrderDetails\":interchanges[0].groups[0].transaction_sets[0].detail.baseline_item_data_PO1_loop.{\n\t\"itemName\":baseline_item_data_PO1.product_service_id_07,\n\t\"Qty\":$number(baseline_item_data_PO1.quantity_02),\n\t\"unitMeasurement\":baseline_item_data_PO1.basis_of_unit_price_code_05,\n\t\"unitPrice\":$number(baseline_item_data_PO1.unit_price_04),\n\t\"totalCost\":$number(baseline_item_data_PO1.quantity_02) * $number(baseline_item_data_PO1.unit_price_04)\n}[],\n\t\"purchaseOrderTotals\":{\n\t\"totalLineItems\":$count(interchanges[0].groups[0].transaction_sets[0].detail.baseline_item_data_PO1_loop.baseline_item_data_PO1),\n\t\"totalUnits\":$map(interchanges[0].groups[0].transaction_sets[0].detail.baseline_item_data_PO1_loop.baseline_item_data_PO1.quantity_02, $number) ~> $sum(),\n\t\"totalCost\":$map(interchanges[0].groups[0].transaction_sets[0].detail.baseline_item_data_PO1_loop.baseline_item_data_PO1, function ($item) {$number($item.quantity_02) * $number($item.unit_price_04)}) ~> $sum()\n},\n\t\"customerEmail\":interchanges[0].groups[0].transaction_sets[0].heading.party_identification_N1_loop[0].administrative_communications_contact_PER[0].communication_number_04,\n\t\"orderDate\":$convertDateTime(interchanges[0].groups[0].functional_group_header_GS.date_04, \"yyyyMMdd\", \"yyyy-MM-dd\")\n}\n}]\n}"
}